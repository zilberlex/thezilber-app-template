import"./DsnmJJEf.js";import{t as E,I as H,D as K,c as L,s as N}from"./D5sAwjn0.js";import{a2 as T,aL as f,aA as z,a as J,g as o,b as M,a3 as G,aq as Q,ar as R,a4 as p,a5 as U,as as v,a7 as V,aB as c,b5 as w,aN as I,a6 as j,ad as W,a8 as X}from"./Cob-Jj1k.js";import{e as Y}from"./dNhtWjF3.js";import{o as Z}from"./CFxWyj_y.js";import{B as ee}from"./b6WWri3h.js";import{c as te}from"./CKiNHVVP.js";import{a as ae}from"./Bu2xErak.js";function re(a){const t=[],i=/\{([^}]+)\}/g;let r=0,s;for(;s=i.exec(a);)s.index>r&&t.push({kind:"text",value:a.slice(r,s.index)}),t.push({kind:"param",name:s[1]}),r=i.lastIndex;return r<a.length&&t.push({kind:"text",value:a.slice(r)}),t}function oe(a,t){try{const i=JSON.stringify(t);window.localStorage.setItem(a,i)}catch{console.error("error at saving item to localStorage, key",a,"value")}}function se(a){let t=window.localStorage.getItem(a);return t&&JSON.parse(t)}var ne=G('<div>Saving...</div> <div class="mini-app svelte-oe0nxq"><!> <!> <!></div>',1);function ie(a,t){T(t,!0);const i="DynamicForm";let r=f(""),s=f(!1),S=j(()=>re(o(r))),h=j(()=>C(o(S))),m=f(z({}));Z(()=>{let e=q();e&&(c(r,e.commandStr,!0),c(m,e.formData,!0))}),J(()=>{E(o(m)),M(()=>{A(null)})});function C(e){const l={};for(const n of e)n.kind==="param"&&(l[n.name]={type:"string"});return l}function O(e,l,n){let B=Object.entries(l),u=[],d=0;return e.forEach($=>{if($.kind==="text")u.push($.value);else{const D=n[d];u.push(D||`[FILL:${B[d][0]}]`),d++}}),u.join("")}function q(){return se(i)}function g(){let e={commandStr:o(r),formData:N(o(m))};c(s,!0),setTimeout(()=>{c(s,!1)},1e3),oe(i,e)}let A=te(g,{cooldownDelay:0,debounceDelay:2e3});var x=ne(),y=Q(x);let _;var b=v(y,2),k=V(b);H(k,{placeholder:"Enter Command here, use squirly braces for {field}",get value(){return o(r)},set value(e){c(r,e,!0)},children:(e,l)=>{w();var n=I("Command String");p(e,n)},$$slots:{default:!0}});var F=v(k,2);K(F,{get formSchema(){return o(h)},outputFunc:(...e)=>O(o(S),o(h),e),get form(){return o(m)},set form(e){c(m,e,!0)}});var P=v(F,2);ee(P,{class:"button-save",onclick:g,[L()]:e=>(ae("s","alt")||W)(e),children:(e,l)=>{w();var n=I("Save");p(e,n)},$$slots:{default:!0}}),X(b),R(e=>_=Y(y,1,"save-indicator svelte-oe0nxq",null,_,e),[()=>({show:o(s)})]),p(a,x),U()}const Se=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{ie as _,Se as a};
