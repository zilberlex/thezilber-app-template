import"./DsnmJJEf.js";import{I as K,D as M,c as N}from"./yhx3Gogc.js";import{a5 as T,aN as f,aC as z,a as B,g as o,b as J,a6 as L,at as G,a9 as $,au as Q,a7 as p,a8 as R,av as v,aa as U,aD as i,b7 as I,aP as C,ah as V,ab as W}from"./iq6ECR_1.js";import{t as X,a as Y,s as Z}from"./CHSBR-0Z.js";import{e as tt}from"./DXzmktii.js";import{o as et}from"./BzBlTBVL.js";import{B as at}from"./GZf-axUJ.js";import{c as rt}from"./CKiNHVVP.js";function ot(r){const e=[],m=/\{([^}]+)\}/g;let a=0,s;for(;s=m.exec(r);)s.index>a&&e.push({kind:"text",value:r.slice(a,s.index)}),e.push({kind:"param",name:s[1]}),a=m.lastIndex;return a<r.length&&e.push({kind:"text",value:r.slice(a)}),e}function nt(r,e){try{const m=JSON.stringify(e);window.localStorage.setItem(r,m)}catch{console.error("error at saving item to localStorage, key",r,"value")}}function st(r){let e=window.localStorage.getItem(r);return e&&JSON.parse(e)}var ct=L('<div>Saving...</div> <div class="mini-app svelte-oe0nxq"><!> <!> <!></div>',1);function it(r,e){T(e,!0);const m="DynamicForm";let a=f(""),s=f(!1),S=$(()=>ot(o(a))),h=$(()=>j(o(S))),l=f(z({}));et(()=>{let t=P();t?.commandStr?(i(a,t.commandStr,!0),i(l,t.formData,!0)):(n=>{i(a,n.commandStr,!0),i(l,n.formData,!0)})(q())}),B(()=>{X(o(l)),J(()=>{E(null)})});function j(t){const n={};for(const c of t)c.kind==="param"&&(n[c.name]={type:"string"});return n}function O(t,n,c){let H=Object.entries(n),u=[],d=0;return t.forEach(F=>{if(F.kind==="text")u.push(F.value);else{const w=c[d];u.push(w||`[FILL:${H[d][0]}]`),d++}}),u.join("")}function P(){return st(m)}function g(){let t={commandStr:o(a),formData:Z(o(l))};i(s,!0),setTimeout(()=>{i(s,!1)},1e3),nt(m,t)}let E=rt(g,{cooldownDelay:0,debounceDelay:2e3});function q(){return{commandStr:"cp -r {src} {dest}",formData:{src:{value:"./origin/",schema:{type:"string"}},dest:{value:"./bkp/origin/",schema:{type:"string"}}}}}var y=ct(),x=G(y);let _;var k=v(x,2),D=U(k);K(D,{hotkey:{hotkey:"0",tooltip:"Modify Command"},placeholder:"Enter Command here, use squirly braces for {field}",get value(){return o(a)},set value(t){i(a,t,!0)},children:(t,n)=>{I();var c=C("Command String");p(t,c)},$$slots:{default:!0}});var b=v(D,2);M(b,{get formSchema(){return o(h)},outputFunc:(...t)=>O(o(S),o(h),t),get form(){return o(l)},set form(t){i(l,t,!0)}});var A=v(b,2);at(A,{class:"button-save",onclick:g,[N()]:t=>(Y("Save","s","alt")||V)(t),children:(t,n)=>{I();var c=C("Save");p(t,c)},$$slots:{default:!0}}),W(k),Q(t=>_=tt(x,1,"save-indicator svelte-oe0nxq",null,_,t),[()=>({show:o(s)})]),p(r,y),R()}const ht=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"}));export{it as _,ht as a};
