import"./DsnmJJEf.js";import{I as H,D as K,c as M}from"./yhx3Gogc.js";import{a5 as N,aN as f,aC as T,a as z,g as o,b as B,a6 as J,at as L,a9 as w,au as G,a7 as p,a8 as Q,av as v,aa as R,aD as c,b7 as I,aP as C,ah as U,ab as V}from"./iq6ECR_1.js";import{t as W,a as X,s as Y}from"./CHSBR-0Z.js";import{e as Z}from"./DXzmktii.js";import{o as ee}from"./BzBlTBVL.js";import{B as te}from"./GZf-axUJ.js";import{c as ae}from"./CKiNHVVP.js";function re(a){const t=[],i=/\{([^}]+)\}/g;let r=0,n;for(;n=i.exec(a);)n.index>r&&t.push({kind:"text",value:a.slice(r,n.index)}),t.push({kind:"param",name:n[1]}),r=i.lastIndex;return r<a.length&&t.push({kind:"text",value:a.slice(r)}),t}function oe(a,t){try{const i=JSON.stringify(t);window.localStorage.setItem(a,i)}catch{console.error("error at saving item to localStorage, key",a,"value")}}function ne(a){let t=window.localStorage.getItem(a);return t&&JSON.parse(t)}var se=J('<div>Saving...</div> <div class="mini-app svelte-oe0nxq"><!> <!> <!></div>',1);function ie(a,t){N(t,!0);const i="DynamicForm";let r=f(""),n=f(!1),h=w(()=>re(o(r))),S=w(()=>j(o(h))),m=f(T({}));ee(()=>{let e=P();e&&(c(r,e.commandStr,!0),c(m,e.formData,!0))}),z(()=>{W(o(m)),B(()=>{q(null)})});function j(e){const l={};for(const s of e)s.kind==="param"&&(l[s.name]={type:"string"});return l}function O(e,l,s){let E=Object.entries(l),u=[],d=0;return e.forEach(F=>{if(F.kind==="text")u.push(F.value);else{const $=s[d];u.push($||`[FILL:${E[d][0]}]`),d++}}),u.join("")}function P(){return ne(i)}function g(){let e={commandStr:o(r),formData:Y(o(m))};c(n,!0),setTimeout(()=>{c(n,!1)},1e3),oe(i,e)}let q=ae(g,{cooldownDelay:0,debounceDelay:2e3});var y=se(),x=L(y);let _;var k=v(x,2),b=R(k);H(b,{hotkey:{hotkey:"0",tooltip:"Modify Command"},placeholder:"Enter Command here, use squirly braces for {field}",get value(){return o(r)},set value(e){c(r,e,!0)},children:(e,l)=>{I();var s=C("Command String");p(e,s)},$$slots:{default:!0}});var D=v(b,2);K(D,{get formSchema(){return o(S)},outputFunc:(...e)=>O(o(h),o(S),e),get form(){return o(m)},set form(e){c(m,e,!0)}});var A=v(D,2);te(A,{class:"button-save",onclick:g,[M()]:e=>(X("Save","s","alt")||U)(e),children:(e,l)=>{I();var s=C("Save");p(e,s)},$$slots:{default:!0}}),V(k),G(e=>_=Z(x,1,"save-indicator svelte-oe0nxq",null,_,e),[()=>({show:o(n)})]),p(a,y),Q()}const he=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{ie as _,he as a};
