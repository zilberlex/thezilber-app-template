import"./DsnmJJEf.js";import{I as K,D as M,c as N}from"./KLjgY6GW.js";import{a6 as T,aN as f,ax as z,a as B,g as o,b as J,a7 as L,au as V,aa as $,av as G,a8 as p,a9 as Q,aw as v,V as m,ab as R,b7 as I,aP as C,ai as U,ac as W}from"./dn7Xk9dZ.js";import{t as X,a as Y,s as Z}from"./B8eWRcvA.js";import{e as tt}from"./BkHuLanm.js";import{o as et}from"./2aTB9j-e.js";import{B as at}from"./DQByVaJ2.js";import{c as rt}from"./CKiNHVVP.js";import{a as ot}from"./CatWoohk.js";function nt(r){const e=[],c=/\{([^}]+)\}/g;let a=0,s;for(;s=c.exec(r);)s.index>a&&e.push({kind:"text",value:r.slice(a,s.index)}),e.push({kind:"param",name:s[1]}),a=c.lastIndex;return a<r.length&&e.push({kind:"text",value:r.slice(a)}),e}function st(r,e){try{const c=JSON.stringify(e);window.localStorage.setItem(r,c)}catch{console.error("error at saving item to localStorage, key",r,"value")}}function it(r){let e=window.localStorage.getItem(r);return e&&JSON.parse(e)}var mt=L('<div>Saving...</div> <div class="mini-app svelte-oe0nxq"><!> <!> <!></div>',1);function ct(r,e){T(e,!0);const c="DynamicForm";ot.pageContext.title="Dynamic Form";let a=f(""),s=f(!1),S=$(()=>nt(o(a))),h=$(()=>j(o(S))),l=f(z({}));et(()=>{let t=P();t?.commandStr?(m(a,t.commandStr,!0),m(l,t.formData,!0)):(n=>{m(a,n.commandStr,!0),m(l,n.formData,!0)})(q())}),B(()=>{X(o(l)),J(()=>{E(null)})});function j(t){const n={};for(const i of t)i.kind==="param"&&(n[i.name]={type:"string"});return n}function O(t,n,i){let H=Object.entries(n),u=[],d=0;return t.forEach(F=>{if(F.kind==="text")u.push(F.value);else{const w=i[d];u.push(w||`[FILL:${H[d][0]}]`),d++}}),u.join("")}function P(){return it(c)}function g(){let t={commandStr:o(a),formData:Z(o(l))};m(s,!0),setTimeout(()=>{m(s,!1)},1e3),st(c,t)}let E=rt(g,{cooldownDelay:0,debounceDelay:2e3});function q(){return{commandStr:"cp -r {src} {dest}",formData:{src:{value:"./origin/",schema:{type:"string"}},dest:{value:"./bkp/origin/",schema:{type:"string"}}}}}var y=mt(),x=V(y);let _;var k=v(x,2),D=R(k);K(D,{hotkey:{hotkey:"0",tooltip:"Modify Command"},placeholder:"Enter Command here, use squirly braces for {field}",get value(){return o(a)},set value(t){m(a,t,!0)},children:(t,n)=>{I();var i=C("Command String");p(t,i)},$$slots:{default:!0}});var b=v(D,2);M(b,{get formSchema(){return o(h)},outputFunc:(...t)=>O(o(S),o(h),t),get form(){return o(l)},set form(t){m(l,t,!0)}});var A=v(b,2);at(A,{class:"button-save",onclick:g,[N()]:t=>(Y("Save","s","alt")||U)(t),children:(t,n)=>{I();var i=C("Save");p(t,i)},$$slots:{default:!0}}),W(k),G(t=>_=tt(x,1,"save-indicator svelte-oe0nxq",null,_,t),[()=>({show:o(s)})]),p(r,y),Q()}const yt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"}));export{ct as _,yt as a};
